# pmtransform: PMTiles transformation tool

New CLI tool for transforming existing PMTiles archives without touching the original file.

## New files

- `cmd/pmtransform/main.go` — CLI entry point with flag parsing, mode auto-detection,
  and settings summary display
- `internal/pmtiles/reader.go` — PMTiles v3 reader: header/directory parsing, tile data
  reading, zoom-level enumeration with Hilbert curve tile ID indexing
- `internal/tile/transform.go` — Transform pipeline with three processing modes:
  passthrough (raw byte copy), re-encode (decode + encode), rebuild (pyramid downsampling)

## Modified files

- `internal/pmtiles/header.go` — Added `DeserializeHeader()` and `TileTypeString()` for
  reading PMTiles headers; added `e7ToLonLat()` reverse conversion
- `internal/pmtiles/directory.go` — Added `DeserializeDirectory()` for gzip-compressed
  varint-encoded directory parsing; added `TileIDToZXY()` and `hilbertToXY()` for reverse
  Hilbert curve mapping
- `Makefile` — Added `build-transform`, `build-all`, `demo-transform`,
  `demo-transform-reencode`, and `demo-transform-rebuild` targets
- `ARCHITECTURE.md` — Added pmtransform CLI, reader, and transform pipeline to file tree;
  added Transform Pipeline section
- `DESIGN.md` — Documented design decisions: separate binary, passthrough fast path,
  max-zoom anchored rebuild
- `README.md` — Added pmtransform section with usage, flags table, and examples

## Capabilities

- **Format conversion**: Change tile encoding (e.g., WebP → PNG, JPEG → WebP)
- **Zoom level changes**: Add lower zoom levels (downsampling) or remove zoom levels
- **Resampling**: Rebuild the entire pyramid with a different interpolation method
  (lanczos, bicubic, bilinear, nearest, mode)
- **Fill empty tiles**: Generate solid-color tiles for missing positions within bounds
- **Passthrough fast path**: When no transformation is needed (just zoom pruning),
  raw tile bytes are copied without decode/encode overhead
