# Fix CI: libwebp not found

## Problem

GitHub CI failed with:
```
Package libwebp was not found in the pkg-config search path.
```

Two root causes:
1. **Test job**: `go vet`/`go test` run with CGO enabled (default) but `libwebp-dev` was not installed on the Ubuntu runner.
2. **Build job**: Uses `CGO_ENABLED=0` for cross-compilation, which excludes `webp.go` (imports "C"), but `encoder.go` and `decode.go` reference symbols defined there (`newWebPEncoder`, `DecodeWebP`), causing undefined symbol errors.

## Fix

### CI workflow (`.github/workflows/ci.yml`)
- Added `sudo apt-get update && sudo apt-get install -y libwebp-dev` step before Go setup in the test job.

### Non-CGO stubs (`internal/encode/webp_stub.go`)
- New file with `//go:build !cgo` constraint providing `newWebPEncoder`, `DecodeWebP`, and `imageToRGBA` stubs that return clear error messages.
- Allows `CGO_ENABLED=0` builds to compile — WebP is unavailable at runtime but the binary works for other formats.

### CGO availability flag (`internal/encode/webp_available.go`)
- Exports `webpCGOAvailable` constant (true when CGO, false otherwise) so tests can skip webp-specific cases when building without CGO.

### Test update (`internal/encode/encoder_test.go`)
- `TestNewEncoder/webp` skips when `webpCGOAvailable` is false.

## Verification

- `CGO_ENABLED=0 go build ./...` — passes
- `CGO_ENABLED=1 go build ./...` — passes
- `CGO_ENABLED=0 go test ./...` — passes (webp test skipped)
- `CGO_ENABLED=1 go test ./...` — passes (webp test runs)
- `go vet ./...` — passes in both modes
- `gofmt -l .` — no formatting issues
